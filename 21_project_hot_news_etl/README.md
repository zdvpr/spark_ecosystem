# Домашнее задание «Проектная работа "Горячие новости"

## Описание
На основе датасета новостей за 2020 год от российских новостных сайтов:
https://www.kaggle.com/vfomenko/russian-news-2020
определять TOP N горячих новостей заданного периода в прошлом.
Всего в датасете почти 300 тысяч новостей за период с января по август 2020 года.

Из датасета в Кафку отправляются сообщения. Далее стриминг, который постоянно читает очередь сообщений.
Заголовки новостей разбиваются на отдельные слова и приводятся к нижнему регистру, удаляются знаки пунктуации, предлоги, междометия
и записывать в витрину полученные слова с меткой времени и идентификатором/ссылкой на новость, откуда слово было получено.
Аналогичная логика и на уровне дня в батчевой загрузке, только данные загружаются за прошедший день.
Далее регулярно запускается джоба, которая опредлеяет за нужные нам периоды (текущие день/ недели и пр.) самые используемые слова и отображает ту новость,
на которую ссылаются первые M самых популярных слов.

Реализация разбивается на 4 модуля:
1) 21_project_hot_news_msg - генерация сообщений в кафку
2) 21_project_hot_news_etl - стриминговая обработка входящих сообщений, формирование в БД Postgres слов с ссылкой на новость откуда они пришли
3) 21_project_hot_news_etl_day -  аналогично 21_project_hot_news_etl, только батчевая обработка
4) 21_project_hot_news_top - чтение БД Postgres и формирование списка горячих новостей на основе самых популярных слов за указанный промежуток времени

Это модуль 2 из списка выше.

---

## Документация для запуска приложения

### Build & Prepare Postgres
* Run command
```bash
docker-compose up -d
```

### Assembly JAR file for project:
* Run command
```bash
sbt assembly
```

### Download Postgres driver file for project e.g.:
postgresql-42.2.6.jar

### Run app
* Run command
```bash
spark-submit --driver-class-path /Users/ruassd/Drivers/postgresql-42.2.6.jar --jars /Users/ruassd/Drivers/postgresql-42.2.6.jar ./target/scala-2.12/hot-news-etl-assembly-0.0.1.jar
```